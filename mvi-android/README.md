# MVI Android Module
This module serves as the crucial link between the platform-agnostic `:core:mvi` library and the Android framework. 
It provides Android-specific components and helpers that integrate the MVI core into the Android lifecycle and Jetpack Compose.

## Core Components

### 1. `ViewModel<S, I>`
This is the engine of the MVI architecture on Android. It's an abstract class that inherits from androidx.lifecycle.ViewModel, 
giving it lifecycle awareness.
- State Hosting: It holds the screen's State in a StateFlow, making it observable and resilient to configuration changes.
- Intent Processing: It exposes a single onIntent(intent: I) method, which is the sole entry point for all user actions and async results.
- Side Effect Execution: When an intent is mapped to a SideEffect, the ViewModel executes it within its viewModelScope.
- Event Handling: It manages a SharedFlow for both NavigationEvents and UiEvents, ensuring that one-off actions are consumed exactly once.
- Middleware: It includes a LogMiddleware by default to print the flow of intents, state changes, and side effects to Logcat, which is
  invaluable for debugging. 
 
This ViewModel is designed to be generated by the annotation processor and should not be manually subclassed by developers.

### 2. `NavigationEvent` and `UiEvent`
These are sealed interfaces representing concrete, one-off events that can be triggered from a `SideEffect`.

- NavigationEvent: Abstracts the Jetpack Navigation Component API.
  - NavigationEvent.To(route: String): Navigate to a specific destination.
  - NavigationEvent.PopBack: Pop the current screen from the back stack.
  - NavigationEvent.PopUpTo(...): Pop the back stack up to a given route.
  - NavigationEvent.PopBackWithResult(...): Pop the back stack and deliver a result to the previous screen. 
  
- UiEvent: Represents transient UI feedback. 
  - UiEvent.ShowSnackbar(...): Displays a message in a Snackbar.
  - UiEvent.ShowToast(...): Displays a short Toast message.

### 3. Side Effect Builders
This module provides Android-specific SideEffect builder functions that simplify triggering navigation and UI events from 
the side effect configuration DSL. 
- navigateToRoute { state, intent -> ... }: A builder for creating a SideEffect that results in a NavigationEvent.To. It's the standard way to trigger 
  navigation to a new screen.
- navigateToEvent(event: NavigationEvent): A builder for triggering non-route-based events, such as NavigationEvent.PopBack.
- navigateToEvent { state, intent -> ... }: Like navigateToEvent with a lambda, but the lambda receives the concrete intent type.
- showSnackbar(message: String): A builder for displaying a Snackbar.
- showToast(message: String): A builder for displaying a Toast.

## Unidirectional Data Flow on Android
The `:mvi-android` module orchestrates the platform-agnostic data flow within the Android lifecycle:
1. Intent: A Composable Pane calls viewModel.onIntent(YourIntent). 
2. ViewModel: The ViewModel receives the intent.
3. Reducer: The ViewModel passes the current state and the intent to the Reducer, which is a pure function that calculates and returns a new state.
4. State Update: The ViewModel updates its StateFlow with the new state, causing the UI to recompose.
5. Side Effect Execution: The ViewModel looks up the intent in its SideEffectMap. If a SideEffect is found, it is executed in the viewModelScope.
   - Data Result: If the SideEffect produces a NewIntent or NewIntents result, the ViewModel feeds them back into the loop by calling onIntent() again.
   - Event Result: If the SideEffect produces a Navigation or ShowUiEvent result, the ViewModel emits the event to the corresponding SharedFlow.
6. Event Handling: A Composable collector (CollectNavigationEvents or CollectUiEvents) receives the event and executes the platform-specific action (e.g., calling navController.navigate(...)), completing the cycle.

This architecture ensures that state management is predictable and lifecycle-aware, while keeping navigation, UI feedback, and asynchronous work cleanly separated from UI logic.
